<link rel="import" href="../polymer/polymer.html">
<dom-module id="at-core-spinner">
  <style>
    .wave {
      margin: 2px auto;
      width: 50px;
      height: 30px;
      text-align: center;
      font-size: 10px;
    }
    .wave > div {
      background-color: #4F7DC9;
      height: 100%;
      width: 6px;
      display: inline-block;
      -webkit-animation: stretchdelay 1.2s infinite ease-in-out;
      animation: stretchdelay 1.2s infinite ease-in-out;
    }
    .wave .rect2 {
      -webkit-animation-delay: -1.1s;
      animation-delay: -1.1s;
    }
    .wave .rect3 {
      -webkit-animation-delay: -1.0s;
      animation-delay: -1.0s;
    }
    .wave .rect4 {
      -webkit-animation-delay: -0.9s;
      animation-delay: -0.9s;
    }
    .wave .rect5 {
      -webkit-animation-delay: -0.8s;
      animation-delay: -0.8s;
    }
    @-webkit-keyframes stretchdelay {
      0%, 40%, 100% {
        -webkit-transform: scaleY(0.4);
      }
      20% {
        -webkit-transform: scaleY(1.0);
      }
    }
    @keyframes stretchdelay {
      0%, 40%, 100% {
        transform: scaleY(0.4);
        -webkit-transform: scaleY(0.4);
      }
      20% {
        transform: scaleY(1.0);
        -webkit-transform: scaleY(1.0);
      }
    }
    .spinner {
      min-width: 24px;
      min-height: 24px;
      position: relative;
      margin: 2px auto;
    }
    @keyframes spinner {
      to {
        transform: rotate(360deg);
      }
    }
    @-webkit-keyframes spinner {
      to {
        -webkit-transform: rotate(360deg);
      }
    }
    .spinner:before {
      content: 'Loadingâ€¦';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 16px;
      height: 16px;
      margin-top: -10px;
      margin-left: -10px;
    }
    .spinner:not(:required):before {
      content: '';
      border-radius: 50%;
      border-top: 2px solid #4F7DC9;
      border-right: 2px solid transparent;
      animation: spinner .9s linear infinite;
      -webkit-animation: spinner .9s linear infinite;
    }
    .hidden {
      display: none;
    }
  </style>

  <template>

    <div id="wave" class="wave hidden">
      <div class="rect1"></div>
      <div class="rect2"></div>
      <div class="rect3"></div>
      <div class="rect4"></div>
      <div class="rect5"></div>
    </div>

    <div id="spinner" class="spinner hidden">
    </div>

  </template>
</dom-module>

<script>
  Polymer({
    is: 'at-core-spinner',
    properties: {
      display: {
        type: String,
        value: "block",
        reflectToAttribute: true,
        notify: true,
        observer: 'modeChanged'
      },
      type: {
        type: String,
        value: "spinner",
        reflectToAttribute: true,
        notify: true,
        observer: 'modeChanged'
      }
    },
    ready: function () {
      this.modeChanged(); // initial rendering
    },
    modeChanged: function (n, o) {
      if (!!n && !o) return; // ignore initialization
      
      var d = this.display != "none";
      showhide(this.$.spinner, (this.type == "spinner" ? d : false));
      showhide(this.$.wave, (this.type == "wave" ? d : false));

      function showhide(div, show) {
        if (show) {
          div.classList.remove("hidden");
        } else {
          div.classList.add("hidden");
        }
      }
    }
  });
</script>
