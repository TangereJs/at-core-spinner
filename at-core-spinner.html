<link rel="import" href="../tangere/tangere.html">
<link rel="import" href="../at-theme/at-theme.html">

<dom-module id="at-core-spinner">

  <template>
  <style>
    
    #wave {
      height:30px;
    }
.loaderBalls,
.loaderBalls:before,
.loaderBalls:after {
  border-radius: 50%;
  width: 2em;
  height: 2em;
  -webkit-animation-fill-mode: both;
  animation-fill-mode: both;
  -webkit-animation: load7 1.8s infinite ease-in-out;
  animation: load7 1.8s infinite ease-in-out;
}
.loaderBalls {
  color: var(--primary-color);
  line-height:1px;
  font-size: 7px;
  margin: 0px auto;
  position: relative;
  top:-10px;
  text-indent: -9999em;
  -webkit-transform: translateZ(0);
  -ms-transform: translateZ(0);
  transform: translateZ(0);
  -webkit-animation-delay: -0.16s;
  animation-delay: -0.16s;
}
.loaderBalls:before,
.loaderBalls:after {
  content: '';
  position: absolute;
  top: 0;
}
.loaderBalls:before {
  left: -2.8em;
  -webkit-animation-delay: -0.32s;
  animation-delay: -0.32s;
}
.loaderBalls:after {
  left: 2.8em;
}
@-webkit-keyframes load7 {
  0%,
  80%,
  100% {
    box-shadow: 0 2.5em 0 -1.3em;
  }
  40% {
    box-shadow: 0 2.5em 0 0;
  }
}
@keyframes load7 {
  0%,
  80%,
  100% {
    box-shadow: 0 2.5em 0 -1.3em;
  }
  40% {
    box-shadow: 0 2.5em 0 0;
  }
}

    .spinner {
      min-width: 24px;
      min-height: 24px;
      position: relative;
      margin: 2px auto;
    }
    @keyframes spinner {
      to {
        transform: rotate(360deg);
      }
    }
    @-webkit-keyframes spinner {
      to {
        -webkit-transform: rotate(360deg);
      }
    }
    .spinner:before {
      content: 'Loadingâ€¦';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 16px;
      height: 16px;
      margin-top: -10px;
      margin-left: -10px;
    }
    .spinner:not(:required):before {
      content: '';
      border-radius: 50%;
      border-top: 2px solid #4F7DC9;
      border-right: 2px solid transparent;
      animation: spinner .9s linear infinite;
      -webkit-animation: spinner .9s linear infinite;
    }
    .hidden {
      display: none;
    }
  </style>


    <div id="wave" class="hidden"><div class="loaderBalls">Loading...</div></div>

    <div id="spinner" class="spinner hidden">
    </div>

  </template>
</dom-module>

<script>
  Polymer({
    is: 'at-core-spinner',
    properties: {
      display: {
        type: String,
        reflectToAttribute: true,
        value: "block",
        notify: true
      },
      type: {
        type: String,
        reflectToAttribute: true,
        value: "spinner",
        notify: true
      },
    },
    observers: [
      'modeChanged(display, type)'
    ],
    ready: function () {
      //console.log("ready");
      //this.modeChanged(); // initial rendering
    },
    modeChanged: function (n, o) {
      //console.log("modeChanged");

      var d = this.display != "none";
      showhide(this.$.spinner, (this.type == "spinner" ? d : false));
      showhide(this.$.wave, (this.type == "wave" ? d : false));

      function showhide(div, show) {
        if (show) {
          div.classList.remove("hidden");
        } else {
          div.classList.add("hidden");
        }
      }
    }
  });
</script>
